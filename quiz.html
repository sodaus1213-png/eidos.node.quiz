<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>나의 공 색깔 테스트</title>
<style>
  body {
    margin: 0;
    font-family: 'Apple SD Gothic Neo', sans-serif;
    background-color: #000;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
  }
  canvas#particles {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    pointer-events:none;
    z-index:0;
  }
  h1 {
    text-align: center;
    color: gold;
    margin-top: 40px;
    font-size: 3em;
    z-index:1;
    position: relative;
  }
  .quiz-container {
    margin-top: 50px;
    width: 90%;
    max-width: 600px;
    perspective: 1000px;
    z-index:1;
  }
  .question-card {
    background: rgba(255,255,255,0.08);
    border-radius: 25px;
    padding: 40px 20px;
    text-align: center;
    box-shadow: 0 8px 25px rgba(255,255,255,0.2);
    transform-style: preserve-3d;
    transition: transform 0.5s ease, opacity 0.5s ease;
    opacity: 1;
  }
  .options {
    display: flex;
    flex-direction: column;
    margin-top: 25px;
  }
  .options label {
    margin: 10px 0;
    padding: 12px 0;
    background: rgba(255,255,255,0.05);
    border-radius: 12px;
    cursor: pointer;
    transition: 0.3s;
    text-align: center;
  }
  .options input[type="radio"] {
    display: none;
  }
  .options input[type="radio"]:checked + span {
    background: gold;
    color: #000;
  }
  .options span {
    display: block;
    padding: 12px 0;
    border-radius: 12px;
    transition: 0.3s;
  }
  .option-text {
    font-size: 0.8em;
    color: #ccc;
    margin-top: 5px;
  }
  button {
    margin-top: 30px;
    padding: 12px 25px;
    background: gold;
    color: #000;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    transition: 0.3s;
    z-index:1;
    position: relative;
  }
  button:hover {
    background: #fff;
    color: #000;
  }
  .result-container {
    margin-top: 50px;
    width: 100%;
    text-align: center;
    opacity: 0;
    transition: opacity 1s ease;
    display: none;
    z-index:1;
    position: relative;
  }
  .result-card {
    width: 350px;
    height: 500px;
    margin: 0 auto;
    background: linear-gradient(to top, #111, #222);
    clip-path: polygon(10% 0%, 90% 0%, 100% 100%, 0% 100%);
    border-radius: 20px;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding-top: 50px;
    transition: opacity 1s ease;
  }
  .circle-3d {
    width: 140px;
    height: 140px;
    border-radius: 50%;
    background: gold;
    margin-bottom: 25px;
    box-shadow: 0 0 100px 25px rgba(255,255,255,0.3),
                inset 0 -15px 35px rgba(0,0,0,0.3);
    transition: transform 1s ease, background 1s ease;
  }
  .result-text {
    color: gold;
    padding: 25px;
    background: linear-gradient(0deg, rgba(255,215,0,0.1), transparent);
    border-radius: 15px;
    line-height: 1.6;
    margin-top: 15px;
    transition: opacity 1s ease;
  }
</style>
</head>
<body>

<canvas id="particles"></canvas>

<h1>나의 공 색깔 테스트</h1>

<div class="quiz-container" id="quizContainer"></div>

<button id="nextBtn">다음</button>

<div class="result-container" id="resultContainer">
  <div class="result-card">
    <div class="circle-3d" id="resultCircle"></div>
    <h2 id="resultTitle"></h2>
    <p class="result-text" id="resultText"></p>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function(){

// 파티클
const canvas = document.getElementById('particles');
const ctx = canvas.getContext('2d');
let particlesArray = [];

function initParticles() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  particlesArray=[];
  for(let i=0;i<120;i++){
    particlesArray.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height,
      size: Math.random()*3+1,
      speedX: Math.random()*0.5-0.25,
      speedY: Math.random()*0.5-0.25,
      alpha: Math.random()*0.8
    });
  }
}
function animateParticles(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particlesArray.forEach(p=>{
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
    ctx.fillStyle=`rgba(255,215,0,${p.alpha})`;
    ctx.fill();
    p.x+=p.speedX;
    p.y+=p.speedY;
    if(p.x>canvas.width)p.x=0;
    if(p.x<0)p.x=canvas.width;
    if(p.y>canvas.height)p.y=0;
    if(p.y<0)p.y=canvas.height;
  });
  requestAnimationFrame(animateParticles);
}
window.addEventListener('resize', initParticles);
initParticles();
animateParticles();

// 질문 & 결과
const questions = [
  {q:"행복을 느낄 때 나는?", options:[
      {text:"친구들과 함께 나눈다.", color:'gold'},
      {text:"혼자서 있는게 행복이다.", color:'green'},
      {text:"남들에게 자랑하는게 행복이다.", color:'red'},
    ]
  },
  {q:"결정을 내릴 때 나는?", options:[
      {text:"객관적으로 친구들에게 물어보는 편.", color:'blue'},
      {text:"우유부단하여 못 고르는 편.", color:'silver'},
      {text:"보자마자 선택하는 편.", color:'orange'},
    ]
  },
  {q:"모험을 떠날 때 나는?", options:[
      {text:"친구들과 함께 나눈다.", color:'gold'},
      {text:"혼자 조용히 즐긴다.", color:'green'},
      {text:"도전한 것을 남에게 보여준다.", color:'red'},
    ]
  },
  {q:"스트레스를 받을 때 나는?", options:[
      {text:"친구들과 이야기하며 푼다.", color:'blue'},
      {text:"혼자만의 시간을 갖는다.", color:'green'},
      {text:"주변에 과시하며 풀려고 한다.", color:'red'},
    ]
  },
  {q:"새로운 것을 시도할 때 나는?", options:[
      {text:"친구들과 같이 도전한다.", color:'orange'},
      {text:"혼자 천천히 해본다.", color:'green'},
      {text:"결과를 주변에 알린다.", color:'gold'},
    ]
  },
  {q:"신중함이 필요한 상황에서 나는?", options:[
      {text:"친구 의견을 참고한다.", color:'blue'},
      {text:"혼자 깊이 생각한다.", color:'green'},
      {text:"빠르게 결정하고 진행한다.", color:'orange'},
    ]
  },
  {q:"자신의 감정을 표현할 때 나는?", options:[
      {text:"친구들과 공유한다.", color:'gold'},
      {text:"조용히 혼자 느낀다.", color:'green'},
      {text:"주변에 보여준다.", color:'red'},
    ]
  }
];

const tabData = {
    gold: { color: '#FFD700', title: '황금 — 행복', text: '행복은 오는 것이 아니라, 알아보는 것이다.\n지금 이 순간을 해석하는 하나의 관점.' },
    blue: { color: '#1E90FF', title: '파랑 — 조심', text: '모든 선택은 속도가 아니라 각도를 요구한다.\n지금 이 순간을 해석하는 하나의 관점.' },
    red: { color: '#FF4500', title: '빨강 — 충동', text: '망설이지 않은 선택은 기억에 남는다.\n지금 이 순간을 해석하는 하나의 관점.' },
    black: { color: '#000', title: '검정 — 침묵', text: '말하지 않는 것도 하나의 응답이다.\n지금 이 순간을 해석하는 하나의 관점.' },
    silver: { color: '#C0C0C0', title: '은색 — 의심', text: '의심 없는 믿음은 선택이 아니다.\n지금 이 순간을 해석하는 하나의 관점.' },
    green: { color: '#32CD32', title: '초록 — 회복', text: '되돌아오는 데에도 방향이 있다.\n지금 이 순간을 해석하는 하나의 관점.' },
    orange: { color: '#FFA500', title: '주황 — 시도', text: '결과보다 먼저 남는 것은 시도다.\n지금 이 순간을 해석하는 하나의 관점.' }
};

let scoreMap = {gold:0,blue:0,red:0,black:0,silver:0,green:0,orange:0};
let currentQ = 0;

const quizContainer = document.getElementById('quizContainer');
const nextBtn = document.getElementById('nextBtn');
const resultContainer = document.getElementById('resultContainer');
const resultCircle = document.getElementById('resultCircle');
const resultTitle = document.getElementById('resultTitle');
const resultText = document.getElementById('resultText');

function showQuestion(idx){
  const q = questions[idx];
  quizContainer.innerHTML = '';
  const card = document.createElement('div');
  card.className = 'question-card';
  card.style.opacity=0;

  let optionsHTML = '';
  q.options.forEach((opt,i)=>{
    optionsHTML += `<label>
      <input type="radio" name="q${idx}" value="${i}">
      <span>${i+1}</span>
      <div class="option-text">${opt.text}</div>
    </label>`;
  });

  card.innerHTML = `<h2>Q${idx+1}. ${q.q}</h2>
                    <div class="options">${optionsHTML}</div>`;
  quizContainer.appendChild(card);
  setTimeout(()=>{card.style.opacity=1;},50);
}

showQuestion(currentQ);

nextBtn.addEventListener('click',()=>{
  const selected = document.querySelector(`input[name=q${currentQ}]:checked`);
  if(!selected){ alert('점수를 선택해주세요!'); return;}

  const optIdx = parseInt(selected.value);
  const color = questions[currentQ].options[optIdx].color;
  scoreMap[color] += 1; // 1점씩 추가

  currentQ++;
  if(currentQ<questions.length){
    const oldCard = document.querySelector('.question-card');
    oldCard.style.opacity=0;
    setTimeout(()=>{ showQuestion(currentQ); },400);
  } else {
    quizContainer.style.display='none';
    nextBtn.style.display='none';
    resultContainer.style.display='block';
    setTimeout(()=>{resultContainer.style.opacity=1;},50);

    let maxScore=-1;
    let res='gold';
    for(const c in scoreMap){
      if(scoreMap[c]>maxScore){ maxScore=scoreMap[c]; res=c;}
    }
    resultCircle.style.background=tabData[res].color;
    resultTitle.innerText = tabData[res].title;
    resultText.innerHTML = tabData[res].text.replace(/\n/g,'<br>');
  }
});
});
</script>

</body>
</html>
